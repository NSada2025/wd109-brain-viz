# 開発状況 (2025-06-25)

## プロジェクト概要

WD109は、脳のドーパミン神経系を3次元空間で可視化するインタラクティブなWebアプリケーションです。

### 背景
- 脳解剖の理解における多次元的な整理の必要性
- ドーパミン神経系（VTA、SNc、線条体、前頭前野など）の接続関係の可視化
- 侵襲脳波（電気活動）とドーパミン計測（化学活動）の統合的理解

## 実装済み機能

### 1. 3D脳モデル
- Three.js/React Three Fiberベースの3D表示
- 透明度調整可能な脳形状
- 呼吸様アニメーション

### 2. ドーパミン経路
- 主要投射経路の可視化
  - VTA → NAcc（報酬系）
  - VTA → PFC（認知系）  
  - SNc → Striatum（運動系）
- 経路の太さで接続強度を表現
- パルスアニメーションで活動を表現

### 3. 電気活動レイヤー
- 5つの周波数帯域の波形表示
  - δ波（1-4Hz）
  - θ波（4-8Hz）
  - α波（8-13Hz）
  - β波（13-30Hz）
  - γ波（30-80Hz）
- リアルタイム波形アニメーション

### 4. インタラクション
- マウス操作（回転、ズーム、パン）
- キーボードショートカット
  - Space: 再生/一時停止
  - B: 脳モデル表示切替
  - D: ドーパミン経路表示切替
  - E: 電気活動表示切替
- Levaによる詳細コントロール

## 技術スタック

- **フロントエンド**: React 18 + TypeScript
- **3Dグラフィックス**: Three.js + React Three Fiber + Drei
- **状態管理**: Zustand
- **UIコントロール**: Leva
- **ビルドツール**: Vite
- **デプロイ**: GitHub Pages

## 関連プロジェクト

### WD110: サンキーダイアグラム風接続マップ
- ドーパミン神経系の接続をフロー図として可視化
- D3.jsベース
- 要件定義済み、実装準備完了

### WD111: 時空間ヒートマップ
- 電気活動と化学活動の時空間パターンを統合表示
- FastAPI + Angular構成
- 要件定義済み、実装準備完了

## 今後の開発予定

1. **データ統合**
   - 実際の脳波データの読み込み機能
   - ドーパミン濃度データの可視化

2. **解析機能**
   - 電気-化学活動の相関分析
   - 位相カップリング解析

3. **UI/UX改善**
   - プリセットビューの追加
   - ガイドツアー機能

4. **パフォーマンス最適化**
   - コード分割によるバンドルサイズ削減
   - WebGLレンダリング最適化

## リンク

- **ライブデモ**: https://nsada2025.github.io/wd109-brain-viz/
- **リポジトリ**: https://github.com/NSada2025/wd109-brain-viz

## 開発メモ

- WSL環境での開発時はVite設定で`host: true`が必要
- GitHub Pagesデプロイ時は`base`設定でリポジトリ名を指定
- Three.jsのバンドルサイズが大きいため、将来的にcode splittingを検討